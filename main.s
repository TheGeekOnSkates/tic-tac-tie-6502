 ORG $1000
 processor 6502

 include "../../active/library/6502/pet.s"

/******************************************************************************/
/* CONSTANTS                                                                  */
/******************************************************************************/

/* Board parts */

HTOP =		$64 /* horizontal bar, top part */
HBOTTOM =	$63 /* horizontal bar, bottom part */
VLEFT =		$67 /* vertical bar, left side */
VRIGHT =	$65 /* vertical bar, right side */
CORNERTL =	$7A /* corner, top left part */
CORNERTR =	$4C /* corner, top right part */
CORNERBL =	$50 /* corner, bottom left part */
CORNERBR =	$4F /* corner, bottom right part */

/* X and O parts */

XDOWN =		$4D /* downward-slanting line for X */
XUP =		$4E /* upward-slanting line for X */
XCENTER =	$56 /* center of the X */




/******************************************************************************/
/* MAIN LOOP                                                                  */
/******************************************************************************/

MAIN:
	JSR DRAW_BOARD
	JSR RESET_GAME
	RTS




/******************************************************************************/
/* Draws the board (just the lines).  Only affects A-register                 */
/******************************************************************************/
DRAW_BOARD:
	LDA #CHAR_CLEAR
	JSR CHROUT
	LDA #CORNERTR
	STA SCREEN_RAM_START + 410
	STA SCREEN_RAM_START + 415
	STA SCREEN_RAM_START + 420
	STA SCREEN_RAM_START + 610
	STA SCREEN_RAM_START + 615
	STA SCREEN_RAM_START + 620
	STA SCREEN_RAM_START + 810
	STA SCREEN_RAM_START + 815
	STA SCREEN_RAM_START + 820
	STA SCREEN_RAM_START + 1010
	STA SCREEN_RAM_START + 1015
	STA SCREEN_RAM_START + 1020
	LDA #CORNERTL
	STA SCREEN_RAM_START + 414
	STA SCREEN_RAM_START + 419
	STA SCREEN_RAM_START + 424
	STA SCREEN_RAM_START + 614
	STA SCREEN_RAM_START + 619
	STA SCREEN_RAM_START + 624
	STA SCREEN_RAM_START + 814
	STA SCREEN_RAM_START + 819
	STA SCREEN_RAM_START + 824
	STA SCREEN_RAM_START + 1014
	STA SCREEN_RAM_START + 1019
	LDA #CORNERBR
	STA SCREEN_RAM_START + 250
	STA SCREEN_RAM_START + 255
	STA SCREEN_RAM_START + 260
	STA SCREEN_RAM_START + 450
	STA SCREEN_RAM_START + 455
	STA SCREEN_RAM_START + 460
	STA SCREEN_RAM_START + 650
	STA SCREEN_RAM_START + 655
	STA SCREEN_RAM_START + 660
	LDA #CORNERBL
	STA SCREEN_RAM_START + 254
	STA SCREEN_RAM_START + 259
	STA SCREEN_RAM_START + 264
	STA SCREEN_RAM_START + 454
	STA SCREEN_RAM_START + 459
	STA SCREEN_RAM_START + 464
	STA SCREEN_RAM_START + 654
	STA SCREEN_RAM_START + 659
	STA SCREEN_RAM_START + 664
	LDA #HTOP
	STA SCREEN_RAM_START + 411
	STA SCREEN_RAM_START + 412
	STA SCREEN_RAM_START + 413
	STA SCREEN_RAM_START + 416
	STA SCREEN_RAM_START + 417
	STA SCREEN_RAM_START + 418
	STA SCREEN_RAM_START + 421
	STA SCREEN_RAM_START + 422
	STA SCREEN_RAM_START + 423
	STA SCREEN_RAM_START + 611
	STA SCREEN_RAM_START + 612
	STA SCREEN_RAM_START + 613
	STA SCREEN_RAM_START + 616
	STA SCREEN_RAM_START + 617
	STA SCREEN_RAM_START + 618
	STA SCREEN_RAM_START + 621
	STA SCREEN_RAM_START + 622
	STA SCREEN_RAM_START + 623
	STA SCREEN_RAM_START + 811
	STA SCREEN_RAM_START + 812
	STA SCREEN_RAM_START + 813
	STA SCREEN_RAM_START + 816
	STA SCREEN_RAM_START + 817
	STA SCREEN_RAM_START + 818
	STA SCREEN_RAM_START + 821
	STA SCREEN_RAM_START + 822
	STA SCREEN_RAM_START + 823
	STA SCREEN_RAM_START + 1011
	STA SCREEN_RAM_START + 1012
	STA SCREEN_RAM_START + 1013
	STA SCREEN_RAM_START + 1016
	STA SCREEN_RAM_START + 1017
	STA SCREEN_RAM_START + 1018
	STA SCREEN_RAM_START + 1021
	STA SCREEN_RAM_START + 1022
	STA SCREEN_RAM_START + 1023
	LDA #HBOTTOM
	STA SCREEN_RAM_START + 251
	STA SCREEN_RAM_START + 252
	STA SCREEN_RAM_START + 253
	STA SCREEN_RAM_START + 256
	STA SCREEN_RAM_START + 257
	STA SCREEN_RAM_START + 258
	STA SCREEN_RAM_START + 261
	STA SCREEN_RAM_START + 262
	STA SCREEN_RAM_START + 263
	STA SCREEN_RAM_START + 451
	STA SCREEN_RAM_START + 452
	STA SCREEN_RAM_START + 453
	STA SCREEN_RAM_START + 456
	STA SCREEN_RAM_START + 457
	STA SCREEN_RAM_START + 458
	STA SCREEN_RAM_START + 461
	STA SCREEN_RAM_START + 462
	STA SCREEN_RAM_START + 463
	STA SCREEN_RAM_START + 651
	STA SCREEN_RAM_START + 652
	STA SCREEN_RAM_START + 653
	STA SCREEN_RAM_START + 656
	STA SCREEN_RAM_START + 657
	STA SCREEN_RAM_START + 658
	STA SCREEN_RAM_START + 661
	STA SCREEN_RAM_START + 662
	STA SCREEN_RAM_START + 663
	LDA #VLEFT
	STA SCREEN_RAM_START + 294
	STA SCREEN_RAM_START + 299
	STA SCREEN_RAM_START + 304
	STA SCREEN_RAM_START + 334
	STA SCREEN_RAM_START + 339
	STA SCREEN_RAM_START + 344
	STA SCREEN_RAM_START + 374
	STA SCREEN_RAM_START + 379
	STA SCREEN_RAM_START + 384
	STA SCREEN_RAM_START + 494
	STA SCREEN_RAM_START + 499
	STA SCREEN_RAM_START + 504
	STA SCREEN_RAM_START + 534
	STA SCREEN_RAM_START + 539
	STA SCREEN_RAM_START + 544
	STA SCREEN_RAM_START + 574
	STA SCREEN_RAM_START + 579
	STA SCREEN_RAM_START + 584
	STA SCREEN_RAM_START + 694
	STA SCREEN_RAM_START + 699
	STA SCREEN_RAM_START + 704
	STA SCREEN_RAM_START + 734
	STA SCREEN_RAM_START + 739
	STA SCREEN_RAM_START + 744
	STA SCREEN_RAM_START + 774
	STA SCREEN_RAM_START + 779
	STA SCREEN_RAM_START + 784
	LDA #VRIGHT
	STA SCREEN_RAM_START + 290
	STA SCREEN_RAM_START + 295
	STA SCREEN_RAM_START + 300
	STA SCREEN_RAM_START + 330
	STA SCREEN_RAM_START + 335
	STA SCREEN_RAM_START + 340
	STA SCREEN_RAM_START + 370
	STA SCREEN_RAM_START + 375
	STA SCREEN_RAM_START + 380
	STA SCREEN_RAM_START + 490
	STA SCREEN_RAM_START + 495
	STA SCREEN_RAM_START + 500
	STA SCREEN_RAM_START + 530
	STA SCREEN_RAM_START + 535
	STA SCREEN_RAM_START + 540
	STA SCREEN_RAM_START + 570
	STA SCREEN_RAM_START + 575
	STA SCREEN_RAM_START + 580

	STA SCREEN_RAM_START + 690
	STA SCREEN_RAM_START + 695
	STA SCREEN_RAM_START + 700
	STA SCREEN_RAM_START + 730
	STA SCREEN_RAM_START + 735
	STA SCREEN_RAM_START + 740
	STA SCREEN_RAM_START + 770
	STA SCREEN_RAM_START + 775
	STA SCREEN_RAM_START + 780
	RTS


/******************************************************************************/
/* Resets the game (blanks out all 9 spaces)                                  */
/******************************************************************************/
RESET_GAME:
	/* Top left */
	LDA #$20
	STA SCREEN_RAM_START + 291
	STA SCREEN_RAM_START + 292
	STA SCREEN_RAM_START + 293
	STA SCREEN_RAM_START + 331
	STA SCREEN_RAM_START + 332
	STA SCREEN_RAM_START + 333
	STA SCREEN_RAM_START + 371
	STA SCREEN_RAM_START + 372
	STA SCREEN_RAM_START + 373
	/* Top middle */
	STA SCREEN_RAM_START + 296
	STA SCREEN_RAM_START + 297
	STA SCREEN_RAM_START + 298
	STA SCREEN_RAM_START + 336
	STA SCREEN_RAM_START + 337
	STA SCREEN_RAM_START + 338
	STA SCREEN_RAM_START + 376
	STA SCREEN_RAM_START + 377
	STA SCREEN_RAM_START + 378
	/* Top right */
	STA SCREEN_RAM_START + 301
	STA SCREEN_RAM_START + 302
	STA SCREEN_RAM_START + 303
	STA SCREEN_RAM_START + 341
	STA SCREEN_RAM_START + 342
	STA SCREEN_RAM_START + 343
	STA SCREEN_RAM_START + 381
	STA SCREEN_RAM_START + 382
	STA SCREEN_RAM_START + 383
	/* left middle (left edge?) */
	STA SCREEN_RAM_START + 491
	STA SCREEN_RAM_START + 492
	STA SCREEN_RAM_START + 493
	STA SCREEN_RAM_START + 531
	STA SCREEN_RAM_START + 532
	STA SCREEN_RAM_START + 533
	STA SCREEN_RAM_START + 571
	STA SCREEN_RAM_START + 572
	STA SCREEN_RAM_START + 573
	/* center */
	STA SCREEN_RAM_START + 496
	STA SCREEN_RAM_START + 497
	STA SCREEN_RAM_START + 498
	STA SCREEN_RAM_START + 536
	STA SCREEN_RAM_START + 537
	STA SCREEN_RAM_START + 538
	STA SCREEN_RAM_START + 576
	STA SCREEN_RAM_START + 577
	STA SCREEN_RAM_START + 578
	/* right middle */
	STA SCREEN_RAM_START + 501
	STA SCREEN_RAM_START + 502
	STA SCREEN_RAM_START + 503
	STA SCREEN_RAM_START + 541
	STA SCREEN_RAM_START + 542
	STA SCREEN_RAM_START + 543
	STA SCREEN_RAM_START + 581
	STA SCREEN_RAM_START + 582
	STA SCREEN_RAM_START + 583
	/* bottom left */
	STA SCREEN_RAM_START + 691
	STA SCREEN_RAM_START + 692
	STA SCREEN_RAM_START + 693
	STA SCREEN_RAM_START + 731
	STA SCREEN_RAM_START + 732
	STA SCREEN_RAM_START + 733
	STA SCREEN_RAM_START + 771
	STA SCREEN_RAM_START + 772
	STA SCREEN_RAM_START + 773
	/* bottom middle */
	STA SCREEN_RAM_START + 696
	STA SCREEN_RAM_START + 697
	STA SCREEN_RAM_START + 698
	STA SCREEN_RAM_START + 736
	STA SCREEN_RAM_START + 737
	STA SCREEN_RAM_START + 738
	STA SCREEN_RAM_START + 776
	STA SCREEN_RAM_START + 777
	STA SCREEN_RAM_START + 778
	/* bottom right */
	STA SCREEN_RAM_START + 701
	STA SCREEN_RAM_START + 702
	STA SCREEN_RAM_START + 703
	STA SCREEN_RAM_START + 741
	STA SCREEN_RAM_START + 742
	STA SCREEN_RAM_START + 743
	STA SCREEN_RAM_START + 781
	STA SCREEN_RAM_START + 782
	STA SCREEN_RAM_START + 783
	RTS
